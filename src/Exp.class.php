<?php

class Exp
{
    private $experience_table = [
        1 => 0, 2 => 100, 3 => 200, 4 => 400, 5 => 800, 6 => 1500, 7 => 2600, 8 => 4200, 9 => 6400, 10 => 9300, 11 => 13000, 12 => 17600, 13 => 23200, 14 => 29900, 15 => 37800, 16 => 47000, 17 => 57600, 18 => 69700, 19 => 83400, 20 => 98800, 21 => 116000, 22 => 135100, 23 => 156200, 24 => 179400, 25 => 204800, 26 => 232500, 27 => 262600, 28 => 295200, 29 => 330400, 30 => 368300, 31 => 409000, 32 => 452600, 33 => 499200, 34 => 548900, 35 => 601800, 36 => 658000, 37 => 717600, 38 => 780700, 39 => 847400, 40 => 917800, 41 => 992000, 42 => 1070100, 43 => 1152200, 44 => 1238400, 45 => 1328800, 46 => 1423500, 47 => 1522600, 48 => 1626200, 49 => 1734400, 50 => 1847300, 51 => 1965000, 52 => 2087600, 53 => 2215200, 54 => 2347900, 55 => 2485800, 56 => 2629000, 57 => 2777600, 58 => 2931700, 59 => 3091400, 60 => 3256800, 61 => 3428000, 62 => 3605100, 63 => 3788200, 64 => 3977400, 65 => 4172800, 66 => 4374500, 67 => 4582600, 68 => 4797200, 69 => 5018400, 70 => 5246300, 71 => 5481000, 72 => 5722600, 73 => 5971200, 74 => 6226900, 75 => 6489800, 76 => 6760000, 77 => 7037600, 78 => 7322700, 79 => 7615400, 80 => 7915800, 81 => 8224000, 82 => 8540100, 83 => 8864200, 84 => 9196400, 85 => 9536800, 86 => 9885500, 87 => 10242600, 88 => 10608200, 89 => 10982400, 90 => 11365300, 91 => 11757000, 92 => 12157600, 93 => 12567200, 94 => 12985900, 95 => 13413800, 96 => 13851000, 97 => 14297600, 98 => 14753700, 99 => 15219400, 100 => 15694800, 101 => 16180000, 102 => 16675100, 103 => 17180200, 104 => 17695400, 105 => 18220800, 106 => 18756500, 107 => 19302600, 108 => 19859200, 109 => 20426400, 110 => 21004300, 111 => 21593000, 112 => 22192600, 113 => 22803200, 114 => 23424900, 115 => 24057800, 116 => 24702000, 117 => 25357600, 118 => 26024700, 119 => 26703400, 120 => 27393800, 121 => 28096000, 122 => 28810100, 123 => 29536200, 124 => 30274400, 125 => 31024800, 126 => 31787500, 127 => 32562600, 128 => 33350200, 129 => 34150400, 130 => 34963300, 131 => 35789000, 132 => 36627600, 133 => 37479200, 134 => 38343900, 135 => 39221800, 136 => 40113000, 137 => 41017600, 138 => 41935700, 139 => 42867400, 140 => 43812800, 141 => 44772000, 142 => 45745100, 143 => 46732200, 144 => 47733400, 145 => 48748800, 146 => 49778500, 147 => 50822600, 148 => 51881200, 149 => 52954400, 150 => 54042300, 151 => 55145000, 152 => 56262600, 153 => 57395200, 154 => 58542900, 155 => 59705800, 156 => 60884000, 157 => 62077600, 158 => 63286700, 159 => 64511400, 160 => 65751800, 161 => 67008000, 162 => 68280100, 163 => 69568200, 164 => 70872400, 165 => 72192800, 166 => 73529500, 167 => 74882600, 168 => 76252200, 169 => 77638400, 170 => 79041300, 171 => 80461000, 172 => 81897600, 173 => 83351200, 174 => 84821900, 175 => 86309800, 176 => 87815000, 177 => 89337600, 178 => 90877700, 179 => 92435400, 180 => 94010800, 181 => 95604000, 182 => 97215100, 183 => 98844200, 184 => 100491400, 185 => 102156800, 186 => 103840500, 187 => 105542600, 188 => 107263200, 189 => 109002400, 190 => 110760300, 191 => 112537000, 192 => 114332600, 193 => 116147200, 194 => 117980900, 195 => 119833800, 196 => 121706000, 197 => 123597600, 198 => 125508700, 199 => 127439400, 200 => 129389800, 201 => 131360000, 202 => 133350100, 203 => 135360200, 204 => 137390400, 205 => 139440800, 206 => 141511500, 207 => 143602600, 208 => 145714200, 209 => 147846400, 210 => 149999300, 211 => 152173000, 212 => 154367600, 213 => 156583200, 214 => 158819900, 215 => 161077800, 216 => 163357000, 217 => 165657600, 218 => 167979700, 219 => 170323400, 220 => 172688800, 221 => 175076000, 222 => 177485100, 223 => 179916200, 224 => 182369400, 225 => 184844800, 226 => 187342500, 227 => 189862600, 228 => 192405200, 229 => 194970400, 230 => 197558300, 231 => 200169000, 232 => 202802600, 233 => 205459200, 234 => 208138900, 235 => 210841800, 236 => 213568000, 237 => 216317600, 238 => 219090700, 239 => 221887400, 240 => 224707800, 241 => 227552000, 242 => 230420100, 243 => 233312200, 244 => 236228400, 245 => 239168800, 246 => 242133500, 247 => 245122600, 248 => 248136200, 249 => 251174400, 250 => 254237300, 251 => 257325000, 252 => 260437600, 253 => 263575200, 254 => 266737900, 255 => 269925800, 256 => 273139000, 257 => 276377600, 258 => 279641700, 259 => 282931400, 260 => 286246800, 261 => 289588000, 262 => 292955100, 263 => 296348200, 264 => 299767400, 265 => 303212800, 266 => 306684500, 267 => 310182600, 268 => 313707200, 269 => 317258400, 270 => 320836300, 271 => 324441000, 272 => 328072600, 273 => 331731200, 274 => 335416900, 275 => 339129800, 276 => 342870000, 277 => 346637600, 278 => 350432700, 279 => 354255400, 280 => 358105800, 281 => 361984000, 282 => 365890100, 283 => 369824200, 284 => 373786400, 285 => 377776800, 286 => 381795500, 287 => 385842600, 288 => 389918200, 289 => 394022400, 290 => 398155300, 291 => 402317000, 292 => 406507600, 293 => 410727200, 294 => 414975900, 295 => 419253800, 296 => 423561000, 297 => 427897600, 298 => 432263700, 299 => 436659400, 300 => 441084800, 301 => 445540000, 302 => 450025100, 303 => 454540200, 304 => 459085400, 305 => 463660800, 306 => 468266500, 307 => 472902600, 308 => 477569200, 309 => 482266400, 310 => 486994300, 311 => 491753000, 312 => 496542600, 313 => 501363200, 314 => 506214900, 315 => 511097800, 316 => 516012000, 317 => 520957600, 318 => 525934700, 319 => 530943400, 320 => 535983800, 321 => 541056000, 322 => 546160100, 323 => 551296200, 324 => 556464400, 325 => 561664800, 326 => 566897500, 327 => 572162600, 328 => 577460200, 329 => 582790400, 330 => 588153300, 331 => 593549000, 332 => 598977600, 333 => 604439200, 334 => 609933900, 335 => 615461800, 336 => 621023000, 337 => 626617600, 338 => 632245700, 339 => 637907400, 340 => 643602800, 341 => 649332000, 342 => 655095100, 343 => 660892200, 344 => 666723400, 345 => 672588800, 346 => 678488500, 347 => 684422600, 348 => 690391200, 349 => 696394400, 350 => 702432300, 351 => 708505000, 352 => 714612600, 353 => 720755200, 354 => 726932900, 355 => 733145800, 356 => 739394000, 357 => 745677600, 358 => 751996700, 359 => 758351400, 360 => 764741800, 361 => 771168000, 362 => 777630100, 363 => 784128200, 364 => 790662400, 365 => 797232800, 366 => 803839500, 367 => 810482600, 368 => 817162200, 369 => 823878400, 370 => 830631300, 371 => 837421000, 372 => 844247600, 373 => 851111200, 374 => 858011900, 375 => 864949800, 376 => 871925000, 377 => 878937600, 378 => 885987700, 379 => 893075400, 380 => 900200800, 381 => 907364000, 382 => 914565100, 383 => 921804200, 384 => 929081400, 385 => 936396800, 386 => 943750500, 387 => 951142600, 388 => 958573200, 389 => 966042400, 390 => 973550300, 391 => 981097000, 392 => 988682600, 393 => 996307200, 394 => 1003970900, 395 => 1011673800, 396 => 1019416000, 397 => 1027197600, 398 => 1035018700, 399 => 1042879400, 400 => 1050779800, 401 => 1058720000, 402 => 1066700100, 403 => 1074720200, 404 => 1082780400, 405 => 1090880800, 406 => 1099021500, 407 => 1107202600, 408 => 1115424200, 409 => 1123686400, 410 => 1131989300, 411 => 1140333000, 412 => 1148717600, 413 => 1157143200, 414 => 1165609900, 415 => 1174117800, 416 => 1182667000, 417 => 1191257600, 418 => 1199889700, 419 => 1208563400, 420 => 1217278800, 421 => 1226036000, 422 => 1234835100, 423 => 1243676200, 424 => 1252559400, 425 => 1261484800, 426 => 1270452500, 427 => 1279462600, 428 => 1288515200, 429 => 1297610400, 430 => 1306748300, 431 => 1315929000, 432 => 1325152600, 433 => 1334419200, 434 => 1343728900, 435 => 1353081800, 436 => 1362478000, 437 => 1371917600, 438 => 1381400700, 439 => 1390927400, 440 => 1400497800, 441 => 1410112000, 442 => 1419770100, 443 => 1429472200, 444 => 1439218400, 445 => 1449008800, 446 => 1458843500, 447 => 1468722600, 448 => 1478646200, 449 => 1488614400, 450 => 1498627300, 451 => 1508685000, 452 => 1518787600, 453 => 1528935200, 454 => 1539127900, 455 => 1549365800, 456 => 1559649000, 457 => 1569977600, 458 => 1580351700, 459 => 1590771400, 460 => 1601236800, 461 => 1611748000, 462 => 1622305100, 463 => 1632908200, 464 => 1643557400, 465 => 1654252800, 466 => 1664994500, 467 => 1675782600, 468 => 1686617200, 469 => 1697498400, 470 => 1708426300, 471 => 1719401000, 472 => 1730422600, 473 => 1741491200, 474 => 1752606900, 475 => 1763769800, 476 => 1774980000, 477 => 1786237600, 478 => 1797542700, 479 => 1808895400, 480 => 1820295800, 481 => 1831744000, 482 => 1843240100, 483 => 1854784200, 484 => 1866376400, 485 => 1878016800, 486 => 1889705500, 487 => 1901442600, 488 => 1913228200, 489 => 1925062400, 490 => 1936945300, 491 => 1948877000, 492 => 1960857600, 493 => 1972887200, 494 => 1984965900, 495 => 1997093800, 496 => 2009271000, 497 => 2021497600, 498 => 2033773700, 499 => 2046099400, 500 => 2058474800
    ];

    public function getLevelAndPercentageByExp($exp)
    {
        $data = $this->experience_table;
        $level = null;

        foreach($data as $key => $value)
        {
            if($exp>$value)
                continue;

            if($exp<$value)
            {
                $level = $key-1;
                $exp_gained_on_this_level = $exp - $data[$key-1];
                $exp_to_advance = $value - $data[$key-1];
                break;
            }
            else if($exp==$value)
            {
                $level = $key;
                $exp_gained_on_this_level = 0;
                $exp_to_advance = $data[$key+1] - $value;
                break;
            }
        }

        if($level==null)
        {
            $level = 501;
            $exp_gained_on_this_level = 0;
            $exp_to_advance = 0;
        }

        return [
            'level' => $level,
            'exp_gained_on_this_level' => $exp_gained_on_this_level,
            'exp_to_advance' => $exp_to_advance
        ];
    }
}

?>